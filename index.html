<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Electricity Bill Calculator ‚Äî NEPRA 2025</title>
  <meta name="description"
    content="Pakistan's smartest electricity bill calculator. NEPRA 2025 rates, all appliances, real-time calculation." />
  <meta name="theme-color" content="#0d1117" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;600&display=swap"
    rel="stylesheet" />
  <style>
    :root {
      --bg: #0d1117;
      --bg2: #131922;
      --bg3: #1c2433;
      --bg4: #243044;
      --accent: #38bdf8;
      --accent2: #818cf8;
      --accent3: #34d399;
      --glow: rgba(56, 189, 248, 0.18);
      --txt: #f1f5f9;
      --txt2: #94a3b8;
      --txt3: #64748b;
      --border: rgba(255, 255, 255, 0.07);
      --success: #34d399;
      --warn: #fbbf24;
      --danger: #f87171;
      --r: 16px;
      --r2: 12px;
      --sidebar: 260px;
      --trans: .25s cubic-bezier(.4, 0, .2, 1);
    }

    [data-theme="light"] {
      --bg: #f0f4f8;
      --bg2: #ffffff;
      --bg3: #e8edf4;
      --bg4: #dde4ef;
      --txt: #0f172a;
      --txt2: #475569;
      --txt3: #94a3b8;
      --border: rgba(0, 0, 0, 0.08);
    }

    *,
    *::before,
    *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0
    }

    html {
      scroll-behavior: smooth
    }

    body {
      font-family: 'Outfit', system-ui, sans-serif;
      background: var(--bg);
      color: var(--txt);
      min-height: 100vh;
      overflow-x: hidden;
      transition: background var(--trans), color var(--trans)
    }

    /* Aurora background */
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      z-index: 0;
      pointer-events: none;
      background:
        radial-gradient(ellipse 80% 60% at 20% 0%, rgba(56, 189, 248, .12), transparent),
        radial-gradient(ellipse 60% 50% at 80% 100%, rgba(129, 140, 248, .1), transparent),
        radial-gradient(ellipse 50% 40% at 50% 50%, rgba(52, 211, 153, .06), transparent);
      animation: aurora 12s ease-in-out infinite alternate;
    }

    @keyframes aurora {
      0% {
        opacity: .8;
        transform: scale(1) rotate(0deg)
      }

      100% {
        opacity: 1;
        transform: scale(1.05) rotate(2deg)
      }
    }

    /* ‚îÄ‚îÄ Layout ‚îÄ‚îÄ */
    .shell {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      min-height: 100vh
    }

    /* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 28px;
      gap: 16px;
      flex-shrink: 0;
      background: rgba(13, 17, 23, .7);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .hd-left {
      display: flex;
      align-items: center;
      gap: 14px
    }

    .bolt {
      font-size: 28px;
      animation: pulse 3s ease-in-out infinite;
      filter: drop-shadow(0 0 10px var(--accent))
    }

    @keyframes pulse {

      0%,
      100% {
        filter: drop-shadow(0 0 6px var(--accent))
      }

      50% {
        filter: drop-shadow(0 0 20px var(--accent))
      }
    }

    .hd-title {
      font-size: 18px;
      font-weight: 800;
      letter-spacing: -.3px
    }

    .hd-sub {
      font-size: 11px;
      color: var(--accent);
      font-weight: 500;
      letter-spacing: .4px;
      margin-top: 1px
    }

    .hd-right {
      display: flex;
      align-items: center;
      gap: 10px
    }

    .badge {
      padding: 5px 14px;
      border: 1px solid rgba(56, 189, 248, .3);
      border-radius: 999px;
      font-size: 11px;
      font-weight: 700;
      color: var(--accent);
      background: var(--glow);
      letter-spacing: .3px;
      white-space: nowrap
    }

    .icon-btn {
      width: 38px;
      height: 38px;
      border: 1px solid var(--border);
      border-radius: 10px;
      background: var(--bg3);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 17px;
      transition: all var(--trans);
      color: var(--txt)
    }

    .icon-btn:hover {
      background: var(--bg4);
      border-color: var(--accent);
      transform: scale(1.05)
    }

    /* ‚îÄ‚îÄ Body ‚îÄ‚îÄ */
    .body {
      display: flex;
      flex: 1;
      overflow: hidden;
      height: calc(100vh - 65px)
    }

    /* ‚îÄ‚îÄ Sidebar ‚îÄ‚îÄ */
    aside {
      width: var(--sidebar);
      flex-shrink: 0;
      background: rgba(19, 25, 34, .8);
      backdrop-filter: blur(16px);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      padding: 16px 10px;
      gap: 3px;
      overflow-y: auto;
    }

    aside::-webkit-scrollbar {
      width: 4px
    }

    aside::-webkit-scrollbar-thumb {
      background: var(--border);
      border-radius: 4px
    }

    .sb-head {
      font-size: 9px;
      font-weight: 700;
      letter-spacing: 1.5px;
      color: var(--txt3);
      text-transform: uppercase;
      padding: 4px 10px 8px
    }

    /* Search */
    .search-wrap {
      position: relative;
      margin-bottom: 8px
    }

    .search-wrap input {
      width: 100%;
      padding: 9px 12px 9px 34px;
      border: 1px solid var(--border);
      border-radius: 10px;
      background: var(--bg3);
      color: var(--txt);
      font-size: 12px;
      font-family: 'Outfit', sans-serif;
      outline: none;
      transition: all var(--trans);
    }

    .search-wrap input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--glow)
    }

    .search-wrap input::placeholder {
      color: var(--txt3)
    }

    .search-icon {
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 13px;
      opacity: .5
    }

    /* App cards */
    .app-card {
      display: flex;
      align-items: center;
      gap: 11px;
      padding: 10px 12px;
      border-radius: 10px;
      cursor: pointer;
      border: 1px solid transparent;
      transition: all var(--trans);
      position: relative;
      overflow: hidden;
    }

    .app-card:hover {
      background: var(--bg3)
    }

    .app-card.active {
      background: rgba(56, 189, 248, .1);
      border-color: rgba(56, 189, 248, .3)
    }

    .app-card.active::before {
      content: '';
      position: absolute;
      left: 0;
      top: 20%;
      bottom: 20%;
      width: 3px;
      background: var(--accent);
      border-radius: 0 3px 3px 0
    }

    .card-icon {
      font-size: 20px;
      flex-shrink: 0;
      line-height: 1
    }

    .card-txt {
      display: flex;
      flex-direction: column;
      gap: 1px
    }

    .card-name {
      font-size: 12.5px;
      font-weight: 600;
      color: var(--txt)
    }

    .card-watt {
      font-size: 10px;
      color: var(--txt3)
    }

    /* Slab panel */
    .slab-panel {
      margin-top: auto;
      padding: 12px;
      background: rgba(56, 189, 248, .06);
      border: 1px solid rgba(56, 189, 248, .15);
      border-radius: 12px;
      flex-shrink: 0
    }

    .slab-title {
      font-size: 9px;
      font-weight: 700;
      letter-spacing: 1px;
      color: var(--accent);
      text-transform: uppercase;
      margin-bottom: 8px
    }

    .slab-row {
      display: flex;
      justify-content: space-between;
      font-size: 10px;
      font-family: 'JetBrains Mono', monospace;
      color: var(--txt2);
      padding: 2px 0
    }

    .slab-row .rate {
      color: var(--accent);
      font-weight: 600
    }

    /* ‚îÄ‚îÄ Main ‚îÄ‚îÄ */
    main {
      flex: 1;
      overflow-y: auto;
      padding: 32px 28px;
      display: flex;
      flex-direction: column;
      gap: 28px
    }

    main::-webkit-scrollbar {
      width: 5px
    }

    main::-webkit-scrollbar-thumb {
      background: var(--border);
      border-radius: 4px
    }

    /* Appliance hero */
    .appl-hero {
      display: flex;
      align-items: center;
      gap: 18px
    }

    .appl-emoji-wrap {
      width: 72px;
      height: 72px;
      border-radius: 20px;
      background: linear-gradient(135deg, rgba(56, 189, 248, .15), rgba(129, 140, 248, .1));
      border: 1px solid rgba(56, 189, 248, .2);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 38px;
      flex-shrink: 0;
      transition: all var(--trans);
    }

    .appl-emoji-wrap.pop {
      transform: scale(1.15) rotate(-5deg)
    }

    .appl-info h1 {
      font-size: 28px;
      font-weight: 800;
      letter-spacing: -.5px;
      line-height: 1.1
    }

    .appl-info p {
      font-size: 13px;
      color: var(--txt2);
      margin-top: 4px
    }

    .typical-watt {
      display: inline-block;
      margin-top: 6px;
      font-size: 11px;
      font-weight: 600;
      color: var(--accent);
      background: var(--glow);
      border: 1px solid rgba(56, 189, 248, .2);
      padding: 3px 10px;
      border-radius: 999px;
      cursor: pointer;
      transition: all var(--trans)
    }

    .typical-watt:hover {
      background: rgba(56, 189, 248, .2)
    }

    /* Tabs */
    .tabs {
      display: flex;
      gap: 6px;
      background: var(--bg3);
      padding: 5px;
      border-radius: 12px;
      width: fit-content;
      flex-wrap: wrap
    }

    .tab {
      padding: 7px 18px;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--trans);
      color: var(--txt2);
      border: none;
      background: transparent;
      font-family: 'Outfit', sans-serif
    }

    .tab.active {
      background: var(--accent);
      color: #000;
      box-shadow: 0 4px 14px rgba(56, 189, 248, .4)
    }

    /* Glass cards */
    .glass {
      background: rgba(28, 36, 51, .6);
      backdrop-filter: blur(12px);
      border: 1px solid var(--border);
      border-radius: var(--r);
      padding: 24px;
    }

    [data-theme="light"] .glass {
      background: rgba(255, 255, 255, .8)
    }

    /* Inputs */
    .input-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px
    }

    @media(max-width:580px) {
      .input-grid {
        grid-template-columns: 1fr
      }
    }

    .field label {
      display: block;
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: .6px;
      color: var(--txt2);
      margin-bottom: 8px
    }

    .input-wrap {
      position: relative
    }

    .input-wrap input {
      width: 100%;
      padding: 13px 50px 13px 16px;
      border: 1.5px solid var(--border);
      border-radius: 10px;
      background: var(--bg);
      color: var(--txt);
      font-size: 16px;
      font-family: 'JetBrains Mono', monospace;
      font-weight: 600;
      outline: none;
      transition: all var(--trans);
    }

    .input-wrap input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--glow)
    }

    .input-wrap input::placeholder {
      font-family: 'Outfit', sans-serif;
      font-size: 13px;
      font-weight: 400;
      color: var(--txt3)
    }

    .input-unit {
      position: absolute;
      right: 14px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 11px;
      font-weight: 700;
      color: var(--txt3);
      pointer-events: none
    }

    .field-hint {
      font-size: 11px;
      color: var(--txt3);
      margin-top: 6px
    }

    /* Slider */
    .slider-row {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-top: 8px
    }

    input[type=range] {
      -webkit-appearance: none;
      flex: 1;
      height: 4px;
      border-radius: 4px;
      background: linear-gradient(to right, var(--accent) var(--pct, 50%), var(--bg4) var(--pct, 50%));
      outline: none;
      cursor: pointer
    }

    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--accent);
      box-shadow: 0 0 8px var(--accent);
      cursor: pointer;
      transition: transform .15s
    }

    input[type=range]::-webkit-slider-thumb:hover {
      transform: scale(1.2)
    }

    .slider-val {
      font-size: 14px;
      font-weight: 700;
      color: var(--accent);
      min-width: 36px;
      text-align: right;
      font-family: 'JetBrains Mono', monospace
    }

    /* Error */
    .err {
      display: none;
      align-items: center;
      gap: 8px;
      padding: 12px 16px;
      background: rgba(248, 113, 113, .1);
      border: 1px solid rgba(248, 113, 113, .3);
      border-radius: 10px;
      font-size: 13px;
      color: var(--danger);
      animation: fadeIn .2s
    }

    .err.show {
      display: flex
    }

    /* Calc button */
    .calc-btn {
      width: 100%;
      padding: 16px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-size: 15px;
      font-weight: 800;
      font-family: 'Outfit', sans-serif;
      letter-spacing: .3px;
      background: linear-gradient(135deg, #0ea5e9, #6366f1);
      color: #fff;
      position: relative;
      overflow: hidden;
      transition: all var(--trans);
      box-shadow: 0 4px 20px rgba(14, 165, 233, .3);
    }

    .calc-btn::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(255, 255, 255, .15), transparent);
      opacity: 0;
      transition: opacity var(--trans)
    }

    .calc-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 30px rgba(14, 165, 233, .45)
    }

    .calc-btn:hover::before {
      opacity: 1
    }

    .calc-btn:active {
      transform: translateY(0)
    }

    .calc-btn.loading::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, .2), transparent);
      animation: shimmer 1s infinite
    }

    @keyframes shimmer {
      0% {
        transform: translateX(-100%)
      }

      100% {
        transform: translateX(100%)
      }
    }

    /* Live indicator */
    .live-dot {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      color: var(--success);
      font-weight: 600
    }

    .live-dot::before {
      content: '';
      width: 7px;
      height: 7px;
      border-radius: 50%;
      background: var(--success);
      animation: blink 1.4s ease-in-out infinite;
      box-shadow: 0 0 6px var(--success)
    }

    @keyframes blink {

      0%,
      100% {
        opacity: 1
      }

      50% {
        opacity: .3
      }
    }

    /* ‚îÄ‚îÄ Result card ‚îÄ‚îÄ */
    .result-card {
      border-radius: var(--r);
      padding: 24px;
      border: 1px solid;
      display: none;
      animation: slideUp .4s cubic-bezier(.34, 1.3, .64, 1)
    }

    .result-card.show {
      display: block
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(24px)
      }

      to {
        opacity: 1;
        transform: translateY(0)
      }
    }

    .result-card.green {
      background: rgba(52, 211, 153, .06);
      border-color: rgba(52, 211, 153, .25)
    }

    .result-card.yellow {
      background: rgba(251, 191, 36, .06);
      border-color: rgba(251, 191, 36, .25)
    }

    .result-card.red {
      background: rgba(248, 113, 113, .06);
      border-color: rgba(248, 113, 113, .25)
    }

    .result-top {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 20px
    }

    .result-amount {
      font-size: 52px;
      font-weight: 900;
      letter-spacing: -2px;
      line-height: 1
    }

    .result-amount .cur {
      font-size: 22px;
      font-weight: 600;
      vertical-align: super;
      margin-right: 3px;
      letter-spacing: 0
    }

    .green .result-amount {
      color: var(--success)
    }

    .yellow .result-amount {
      color: var(--warn)
    }

    .red .result-amount {
      color: var(--danger)
    }

    .result-actions {
      display: flex;
      gap: 8px
    }

    .act-btn {
      padding: 8px 14px;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      border: 1px solid var(--border);
      background: var(--bg3);
      color: var(--txt2);
      font-family: 'Outfit', sans-serif;
      transition: all var(--trans);
      display: flex;
      align-items: center;
      gap: 5px
    }

    .act-btn:hover {
      border-color: var(--accent);
      color: var(--accent)
    }

    .result-divider {
      height: 1px;
      background: var(--border);
      margin: 16px 0
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px
    }

    @media(max-width:500px) {
      .stats-grid {
        grid-template-columns: 1fr 1fr
      }
    }

    .stat-box {
      background: var(--bg3);
      border-radius: 12px;
      padding: 14px 16px;
      border: 1px solid var(--border)
    }

    .stat-box .s-label {
      font-size: 10px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: .6px;
      color: var(--txt3);
      margin-bottom: 6px
    }

    .stat-box .s-val {
      font-size: 16px;
      font-weight: 800;
      color: var(--txt);
      line-height: 1
    }

    .stat-box .s-sub {
      font-size: 11px;
      color: var(--txt3);
      margin-top: 3px
    }

    /* Slab progress bar */
    .slab-progress-wrap {
      margin-top: 16px
    }

    .slab-progress-label {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      color: var(--txt2);
      margin-bottom: 8px
    }

    .slab-bar {
      height: 8px;
      border-radius: 99px;
      background: var(--bg4);
      overflow: hidden
    }

    .slab-fill {
      height: 100%;
      border-radius: 99px;
      transition: width .8s cubic-bezier(.4, 0, .2, 1);
      background: linear-gradient(90deg, var(--success), var(--warn), var(--danger))
    }

    /* Extra info */
    .extra-row {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 0;
      border-bottom: 1px solid var(--border)
    }

    .extra-row:last-child {
      border-bottom: none
    }

    .extra-row .ei {
      font-size: 18px
    }

    .extra-row .et {
      font-size: 13px;
      color: var(--txt2)
    }

    .extra-row .ev {
      font-size: 13px;
      font-weight: 700;
      color: var(--txt);
      margin-left: auto
    }

    /* Tip box */
    .tip-box {
      padding: 14px 16px;
      background: rgba(56, 189, 248, .07);
      border: 1px solid rgba(56, 189, 248, .2);
      border-radius: 12px;
      font-size: 13px;
      color: var(--txt2);
      display: flex;
      gap: 10px;
      align-items: flex-start;
      margin-top: 16px
    }

    .tip-box .tip-icon {
      font-size: 20px;
      flex-shrink: 0
    }

    /* ‚îÄ‚îÄ Multi-appliance tab ‚îÄ‚îÄ */
    .multi-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px
    }

    .multi-header h2 {
      font-size: 16px;
      font-weight: 800
    }

    .add-btn {
      padding: 8px 16px;
      border-radius: 8px;
      background: linear-gradient(135deg, #0ea5e9, #6366f1);
      color: #fff;
      border: none;
      cursor: pointer;
      font-size: 13px;
      font-weight: 700;
      font-family: 'Outfit', sans-serif;
      transition: all var(--trans)
    }

    .add-btn:hover {
      transform: scale(1.04)
    }

    .multi-list {
      display: flex;
      flex-direction: column;
      gap: 10px
    }

    .multi-item {
      display: grid;
      grid-template-columns: auto 1fr auto auto auto;
      align-items: center;
      gap: 12px;
      padding: 14px 16px;
      background: var(--bg3);
      border-radius: 12px;
      border: 1px solid var(--border);
      animation: fadeIn .3s
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(-8px)
      }

      to {
        opacity: 1;
        transform: translateY(0)
      }
    }

    .mi-icon {
      font-size: 22px
    }

    .mi-name {
      font-weight: 700;
      font-size: 14px
    }

    .mi-sub {
      font-size: 11px;
      color: var(--txt3);
      margin-top: 2px
    }

    .mi-cost {
      font-size: 16px;
      font-weight: 800;
      color: var(--accent);
      font-family: 'JetBrains Mono', monospace;
      white-space: nowrap
    }

    .mi-del {
      width: 30px;
      height: 30px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: transparent;
      cursor: pointer;
      font-size: 15px;
      color: var(--txt3);
      transition: all var(--trans);
      display: flex;
      align-items: center;
      justify-content: center
    }

    .mi-del:hover {
      background: rgba(248, 113, 113, .1);
      border-color: var(--danger);
      color: var(--danger)
    }

    .total-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      background: linear-gradient(135deg, rgba(56, 189, 248, .1), rgba(99, 102, 241, .1));
      border: 1px solid rgba(56, 189, 248, .2);
      border-radius: 12px;
      margin-top: 8px
    }

    .total-row span {
      font-size: 13px;
      font-weight: 700;
      color: var(--txt2)
    }

    .total-row .total-amt {
      font-size: 26px;
      font-weight: 900;
      letter-spacing: -1px;
      font-family: 'JetBrains Mono', monospace;
      color: var(--accent)
    }

    /* ‚îÄ‚îÄ Tips tab ‚îÄ‚îÄ */
    .tips-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px
    }

    @media(max-width:520px) {
      .tips-grid {
        grid-template-columns: 1fr
      }
    }

    .tip-card {
      padding: 18px;
      background: var(--bg3);
      border: 1px solid var(--border);
      border-radius: 14px;
      transition: all var(--trans)
    }

    .tip-card:hover {
      border-color: rgba(56, 189, 248, .3);
      transform: translateY(-2px)
    }

    .tip-card .tc-icon {
      font-size: 28px;
      margin-bottom: 10px
    }

    .tip-card .tc-title {
      font-size: 14px;
      font-weight: 800;
      margin-bottom: 6px
    }

    .tip-card .tc-body {
      font-size: 12px;
      color: var(--txt2);
      line-height: 1.5
    }

    .savings-badge {
      display: inline-block;
      margin-top: 8px;
      font-size: 11px;
      font-weight: 700;
      color: var(--success);
      background: rgba(52, 211, 153, .1);
      border: 1px solid rgba(52, 211, 153, .2);
      padding: 2px 8px;
      border-radius: 4px
    }

    /* Toast */
    .toast-wrap {
      position: fixed;
      bottom: 24px;
      right: 24px;
      z-index: 9999;
      display: flex;
      flex-direction: column;
      gap: 8px
    }

    .toast {
      padding: 12px 18px;
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 12px;
      font-size: 13px;
      font-weight: 600;
      color: var(--txt);
      display: flex;
      align-items: center;
      gap: 10px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, .4);
      animation: toastIn .3s cubic-bezier(.34, 1.3, .64, 1);
      backdrop-filter: blur(12px)
    }

    @keyframes toastIn {
      from {
        opacity: 0;
        transform: translateX(40px)
      }

      to {
        opacity: 1;
        transform: translateX(0)
      }
    }

    .toast.removing {
      animation: toastOut .3s forwards
    }

    @keyframes toastOut {
      to {
        opacity: 0;
        transform: translateX(40px)
      }
    }

    /* Mobile */
    @media(max-width:768px) {
      .body {
        flex-direction: column;
        height: auto;
        overflow: visible
      }

      aside {
        width: 100%;
        flex-direction: row;
        flex-wrap: wrap;
        padding: 10px;
        overflow-x: auto;
        height: auto;
        border-right: none;
        border-bottom: 1px solid var(--border)
      }

      .sb-head,
      .slab-panel,
      .search-wrap {
        display: none
      }

      .app-card {
        flex-shrink: 0;
        padding: 8px 12px
      }

      main {
        padding: 20px 16px
      }

      .appl-info h1 {
        font-size: 22px
      }

      .result-amount {
        font-size: 38px
      }

      .stats-grid {
        grid-template-columns: 1fr 1fr
      }
    }
  </style>
</head>

<body>
  <div class="shell">

    <!-- Header -->
    <header>
      <div class="hd-left">
        <div class="bolt">‚ö°</div>
        <div>
          <div class="hd-title">Electricity Bill Calculator</div>
          <div class="hd-sub">NEPRA 2025 ¬∑ Pakistan</div>
        </div>
      </div>
      <div class="hd-right">
        <div class="badge" id="rateBadge">PKR 4.78 ‚Äì 48.46 / unit</div>
        <button class="icon-btn" id="themeBtn" title="Toggle theme" aria-label="Toggle theme">üåô</button>
      </div>
    </header>

    <div class="body">

      <!-- Sidebar -->
      <aside id="sidebar">
        <div class="sb-head">Appliances</div>
        <div class="search-wrap">
          <span class="search-icon">üîç</span>
          <input type="text" id="searchInput" placeholder="Search appliance‚Ä¶" autocomplete="off" />
        </div>
        <div id="appList"></div>
        <div class="slab-panel">
          <div class="slab-title">NEPRA 2025 Tariff (PKR)</div>
          <div class="slab-row"><span>Lifeline ‚â§50u</span><span class="rate">4.78</span></div>
          <div class="slab-row"><span>Protected ‚â§100u</span><span class="rate">8.52</span></div>
          <div class="slab-row"><span>Protected ‚â§200u</span><span class="rate">11.51</span></div>
          <div class="slab-row"><span>Non-Prot ‚â§300u</span><span class="rate">34.03</span></div>
          <div class="slab-row"><span>Non-Prot 300+u</span><span class="rate">48.46</span></div>
          <div class="slab-row"><span>Fixed charge</span><span class="rate">75/mo</span></div>
        </div>
      </aside>

      <!-- Main -->
      <main>

        <!-- Appliance hero -->
        <div class="appl-hero">
          <div class="appl-emoji-wrap" id="appEmoji">üßä</div>
          <div class="appl-info">
            <h1 id="appName">Refrigerator</h1>
            <p id="appDesc">Runs 24/7 in most households</p>
            <span class="typical-watt" id="typicalBtn" title="Click to fill typical wattage">‚ö° Typical: <span
                id="typicalWatt">150W</span> ‚Äî click to fill</span>
          </div>
        </div>

        <!-- Tabs -->
        <div class="tabs" id="tabBar">
          <button class="tab active" onclick="switchTab('calc',this)">‚ö° Calculator</button>
          <button class="tab" onclick="switchTab('multi',this)">üìä Multi-Appliance</button>
          <button class="tab" onclick="switchTab('tips',this)">üí° Energy Tips</button>
        </div>

        <!-- ‚îÄ‚îÄ CALCULATOR TAB ‚îÄ‚îÄ -->
        <div id="tab-calc">

          <div class="glass">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:18px">
              <span style="font-size:14px;font-weight:700">üìã Enter Usage Details</span>
              <span class="live-dot">Live calculation</span>
            </div>

            <div class="input-grid">
              <div class="field">
                <label>üïê Daily Usage Hours</label>
                <div class="input-wrap">
                  <input type="number" id="hoursInput" min="0.5" max="24" step="0.5" placeholder="e.g. 8" />
                  <span class="input-unit">hrs</span>
                </div>
                <div class="slider-row">
                  <input type="range" id="hoursSlider" min="0.5" max="24" step="0.5" value="8" />
                  <span class="slider-val" id="hoursSliderVal">8</span>
                </div>
                <div class="field-hint">Hours per day (0.5 ‚Äì 24)</div>
              </div>
              <div class="field">
                <label>‚ö° Wattage</label>
                <div class="input-wrap">
                  <input type="number" id="wattInput" min="1" max="50000" step="1" placeholder="e.g. 150" />
                  <span class="input-unit">W</span>
                </div>
                <div class="slider-row">
                  <input type="range" id="wattSlider" min="1" max="5000" step="1" value="150" />
                  <span class="slider-val" id="wattSliderVal">150</span>
                </div>
                <div class="field-hint">Rated power (check appliance label)</div>
              </div>
            </div>
          </div>

          <div class="err" id="errMsg">‚ö†Ô∏è <span id="errTxt"></span></div>

          <button class="calc-btn" id="calcBtn" onclick="calculate()">
            ‚ö° &nbsp; Calculate Monthly Bill
          </button>

          <!-- Result -->
          <div class="result-card" id="resultCard">
            <div class="result-top">
              <div>
                <div
                  style="font-size:12px;font-weight:700;color:var(--txt2);margin-bottom:6px;text-transform:uppercase;letter-spacing:.6px">
                  Monthly Bill Estimate</div>
                <div class="result-amount"><span class="cur">PKR</span><span id="resBill">0</span></div>
              </div>
              <div class="result-actions">
                <button class="act-btn" onclick="copyResult()" id="copyBtn">üìã Copy</button>
                <button class="act-btn" onclick="addToMulti()">‚ûï Add to Total</button>
              </div>
            </div>

            <div class="stats-grid">
              <div class="stat-box">
                <div class="s-label">Units/Month</div>
                <div class="s-val" id="resKwh">‚Äî</div>
                <div class="s-sub">kWh consumed</div>
              </div>
              <div class="stat-box">
                <div class="s-label">Daily Cost</div>
                <div class="s-val" id="resDaily">‚Äî</div>
                <div class="s-sub">PKR/day</div>
              </div>
              <div class="stat-box">
                <div class="s-label">Yearly Cost</div>
                <div class="s-val" id="resYearly">‚Äî</div>
                <div class="s-sub">PKR/year</div>
              </div>
            </div>

            <div class="slab-progress-wrap">
              <div class="slab-progress-label">
                <span id="resSlabLabel">Tariff Slab</span>
                <span id="resRate">‚Äî</span>
              </div>
              <div class="slab-bar">
                <div class="slab-fill" id="slabFill" style="width:10%"></div>
              </div>
            </div>

            <div class="result-divider"></div>

            <div id="extraRows"></div>
            <div class="tip-box" id="tipBox" style="display:none">
              <span class="tip-icon">üí°</span>
              <span id="tipText"></span>
            </div>
          </div>

        </div>

        <!-- ‚îÄ‚îÄ MULTI-APPLIANCE TAB ‚îÄ‚îÄ -->
        <div id="tab-multi" style="display:none">
          <div class="glass">
            <div class="multi-header">
              <h2>üè† Household Bill Estimator</h2>
              <button class="add-btn" onclick="addCurrentToMulti()">+ Add Current</button>
            </div>
            <p style="font-size:13px;color:var(--txt2);margin-bottom:16px">Select an appliance, enter details,
              calculate, then click "Add to Total" or use the button above.</p>
            <div class="multi-list" id="multiList">
              <div style="text-align:center;padding:32px;color:var(--txt3);font-size:14px">No appliances added
                yet.<br>Go to Calculator tab and click "Add to Total"</div>
            </div>
            <div class="total-row" id="totalRow" style="display:none">
              <span>üí∞ Estimated Total Monthly Bill</span>
              <span class="total-amt" id="totalAmt">PKR 0</span>
            </div>
          </div>
        </div>

        <!-- ‚îÄ‚îÄ TIPS TAB ‚îÄ‚îÄ -->
        <div id="tab-tips" style="display:none">
          <div class="glass">
            <h2 style="font-size:16px;font-weight:800;margin-bottom:16px">üí° Energy Saving Tips</h2>
            <div class="tips-grid">
              <div class="tip-card">
                <div class="tc-icon">‚ùÑÔ∏è</div>
                <div class="tc-title">AC at 26¬∞C</div>
                <div class="tc-body">Setting your AC to 26¬∞C instead of 20¬∞C can reduce consumption by up to 40%. Each
                  degree lower increases usage by ~8%.</div>
                <div class="savings-badge">Save up to PKR 3,000/mo</div>
              </div>
              <div class="tip-card">
                <div class="tc-icon">üí°</div>
                <div class="tc-title">Switch to LED</div>
                <div class="tc-body">Replace traditional bulbs with LED lights. LEDs use 80% less energy and last 25x
                  longer.</div>
                <div class="savings-badge">Save up to PKR 500/mo</div>
              </div>
              <div class="tip-card">
                <div class="tc-icon">üßä</div>
                <div class="tc-title">Fridge Placement</div>
                <div class="tc-body">Keep your fridge away from heat sources and walls. A well-ventilated fridge uses
                  15% less electricity.</div>
                <div class="savings-badge">Save up to PKR 400/mo</div>
              </div>
              <div class="tip-card">
                <div class="tc-icon">üåû</div>
                <div class="tc-title">Load Shifting</div>
                <div class="tc-body">Use heavy appliances (washer, iron, geyser) during DISCO off-peak hours to qualify
                  for lower TOU rates.</div>
                <div class="savings-badge">Save up to PKR 1,500/mo</div>
              </div>
              <div class="tip-card">
                <div class="tc-icon">üîå</div>
                <div class="tc-title">Standby Power</div>
                <div class="tc-body">Electronics in standby mode consume 5-10% of your bill. Unplug or use smart power
                  strips.</div>
                <div class="savings-badge">Save up to PKR 300/mo</div>
              </div>
              <div class="tip-card">
                <div class="tc-icon">‚òÄÔ∏è</div>
                <div class="tc-title">Go Solar</div>
                <div class="tc-body">A 5kW solar system in Pakistan can offset 600‚Äì700 units/month. Payback period is
                  under 4 years at current rates.</div>
                <div class="savings-badge">Save PKR 20,000+/mo</div>
              </div>
            </div>
          </div>
        </div>

      </main>
    </div>
  </div>

  <!-- Toast container -->
  <div class="toast-wrap" id="toastWrap"></div>

  <script>
    // ‚îÄ‚îÄ Appliance Data ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const appliances = [
      { name: 'Refrigerator', icon: 'üßä', desc: 'Runs 24/7 in most households', typical: 150, tip: 'Set fridge temperature to 3‚Äì5¬∞C for optimal efficiency.' },
      { name: 'Ceiling Fan', icon: 'üí®', desc: 'Most used cooling appliance', typical: 75, tip: 'Reverse fan direction in winter to push warm air down.' },
      { name: 'Light / Bulb', icon: 'üí°', desc: 'Lighting for rooms & corridors', typical: 15, tip: 'Switch to LED bulbs to cut lighting costs by 80%.' },
      { name: 'Air Conditioner', icon: '‚ùÑÔ∏è', desc: 'Highest energy consumer in summer', typical: 1500, tip: 'Set AC to 26¬∞C and use fan to distribute cool air.' },
      { name: 'Room Cooler', icon: 'üå¨Ô∏è', desc: 'Seasonal cooling alternative to AC', typical: 200, tip: 'Keep water cooler topped up and clean pads monthly.' },
      { name: 'Television', icon: 'üì∫', desc: 'Entertainment hub of the household', typical: 120, tip: 'Enable eco mode; modern OLED TVs save 30% vs LCD.' },
      { name: 'Iron', icon: 'üß∫', desc: 'Clothes ironing appliance', typical: 1200, tip: 'Iron clothes in batches to reduce per-session cost.' },
      { name: 'Water Pump', icon: 'üíß', desc: 'Pumps water to rooftop tanks', typical: 750, tip: 'Install a timer to run the pump only when needed.' },
      { name: 'Washing Machine', icon: 'ü´ß', desc: 'Laundry appliance', typical: 500, tip: 'Wash with cold water and full loads to save energy.' },
      { name: 'Microwave Oven', icon: 'üçî', desc: 'Rapid cooking appliance', typical: 1000, tip: 'Microwave uses 80% less energy than a conventional oven.' },
      { name: 'Desktop PC', icon: 'üñ•Ô∏è', desc: 'High-performance computing', typical: 300, tip: 'Switch to a laptop ‚Äî it uses 80% less power than desktop.' },
      { name: 'Electric Kettle', icon: '‚òï', desc: 'Boiling water for tea & cooking', typical: 1500, tip: 'Boil only the water you need to save energy.' },
      { name: 'Geyser / Water Heater', icon: 'üöø', desc: 'Hot water heating appliance', typical: 2000, tip: 'Use a timer to heat water only before use times.' },
      { name: 'Laptop', icon: 'üíª', desc: 'Portable computing ‚Äî very efficient', typical: 65, tip: 'Enable battery saver mode when on AC power too.' },
      { name: 'Electric Iron', icon: 'üëî', desc: 'Precision garment ironing', typical: 1200, tip: 'Iron clothes from lowest to highest heat settings.' },
    ];

    // ‚îÄ‚îÄ NEPRA 2025 Tariff ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const FIXED = 75;
    function unitPrice(kwh) {
      if (kwh <= 50) return 4.78;
      if (kwh <= 100) return 8.52;
      if (kwh <= 200) return 11.51;
      if (kwh <= 300) return 34.03;
      return 48.46;
    }
    function slabInfo(kwh) {
      if (kwh <= 50) return { label: 'Lifeline (‚â§50 units)', rate: 4.78, pct: 10 };
      if (kwh <= 100) return { label: 'Protected (‚â§100 units)', rate: 8.52, pct: 25 };
      if (kwh <= 200) return { label: 'Protected (‚â§200 units)', rate: 11.51, pct: 45 };
      if (kwh <= 300) return { label: 'Non-Protected (‚â§300u)', rate: 34.03, pct: 70 };
      return { label: 'Non-Protected TOU 300+', rate: 48.46, pct: 100 };
    }

    // ‚îÄ‚îÄ Helpers ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const fmt = n => n.toLocaleString('en-PK', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    const fmtK = n => n >= 1000 ? (n / 1000).toFixed(1) + 'K' : n.toFixed(0);
    const $ = id => document.getElementById(id);

    // ‚îÄ‚îÄ State ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    let selectedIdx = 0;
    let lastResult = null;
    let multiItems = [];
    let debounceT = null;

    // ‚îÄ‚îÄ Build Sidebar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function buildSidebar(filter = '') {
      const list = $('appList');
      list.innerHTML = '';
      appliances.forEach((a, i) => {
        if (filter && !a.name.toLowerCase().includes(filter.toLowerCase())) return;
        const el = document.createElement('div');
        el.className = 'app-card' + (i === selectedIdx ? ' active' : '');
        el.dataset.idx = i;
        el.innerHTML = `<div class="card-icon">${a.icon}</div><div class="card-txt"><div class="card-name">${a.name}</div><div class="card-watt">${a.typical}W typical</div></div>`;
        el.onclick = () => selectAppliance(i);
        list.appendChild(el);
      });
    }

    // ‚îÄ‚îÄ Select Appliance ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function selectAppliance(i) {
      selectedIdx = i;
      const a = appliances[i];
      buildSidebar($('searchInput').value);
      $('appEmoji').textContent = a.icon;
      $('appEmoji').classList.add('pop');
      setTimeout(() => $('appEmoji').classList.remove('pop'), 350);
      $('appName').textContent = a.name;
      $('appDesc').textContent = a.desc;
      $('typicalWatt').textContent = a.typical + 'W';
      $('hoursInput').value = '';
      $('wattInput').value = '';
      hideErr();
      $('resultCard').classList.remove('show');
      lastResult = null;
      updateSliders();
    }

    // ‚îÄ‚îÄ Typical wattage fill ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    $('typicalBtn').onclick = () => {
      $('wattInput').value = appliances[selectedIdx].typical;
      $('wattSlider').value = Math.min(appliances[selectedIdx].typical, 5000);
      $('wattSliderVal').textContent = appliances[selectedIdx].typical;
      updateSliderPct($('wattSlider'));
      toast('‚ö° Typical wattage filled!', 'success');
      debouncedCalc();
    };

    // ‚îÄ‚îÄ Sliders ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function updateSliderPct(slider) {
      const min = +slider.min, max = +slider.max, val = +slider.value;
      const pct = ((val - min) / (max - min)) * 100;
      slider.style.setProperty('--pct', pct + '%');
    }
    function updateSliders() {
      const h = $('hoursInput').value || '8';
      const w = $('wattInput').value || '150';
      $('hoursSlider').value = Math.min(+h, 24);
      $('hoursSliderVal').textContent = h;
      $('wattSlider').value = Math.min(+w, 5000);
      $('wattSliderVal').textContent = w;
      updateSliderPct($('hoursSlider'));
      updateSliderPct($('wattSlider'));
    }

    // Sync slider ‚Üî input
    [['hoursSlider', 'hoursInput', 'hoursSliderVal'],
    ['wattSlider', 'wattInput', 'wattSliderVal']].forEach(([sid, iid, vid]) => {
      const s = $(sid), inp = $(iid), val = $(vid);
      s.oninput = () => {
        inp.value = s.value; val.textContent = s.value;
        updateSliderPct(s); debouncedCalc();
      };
      inp.oninput = () => {
        s.value = Math.min(+inp.value || 0, +s.max);
        val.textContent = inp.value; updateSliderPct(s); debouncedCalc();
      };
      updateSliderPct(s);
    });

    // ‚îÄ‚îÄ Live calc debounce ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function debouncedCalc() {
      clearTimeout(debounceT);
      debounceT = setTimeout(() => {
        if ($('hoursInput').value && $('wattInput').value) calculate(true);
      }, 400);
    }

    // ‚îÄ‚îÄ Calculate ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function calculate(silent = false) {
      const h = parseFloat($('hoursInput').value);
      const w = parseFloat($('wattInput').value);

      if (!$('hoursInput').value || isNaN(h)) { showErr('Enter valid daily usage hours.'); return; }
      if (h < 0.5 || h > 24) { showErr('Hours must be between 0.5 and 24.'); return; }
      if (!$('wattInput').value || isNaN(w)) { showErr('Enter valid wattage.'); return; }
      if (w <= 0 || w > 50000) { showErr('Wattage must be between 1 and 50,000 W.'); return; }

      hideErr();
      const kwh = (w * h * 30) / 1000;
      const rate = unitPrice(kwh);
      const bill = kwh * rate + FIXED;
      const slab = slabInfo(kwh);
      const a = appliances[selectedIdx];

      lastResult = { name: a.name, icon: a.icon, hours: h, watts: w, kwh, bill, slab };

      // Animate number
      animateNum('resBill', bill, v => fmt(v));
      animateNum('resKwh', kwh, v => v.toFixed(2));
      animateNum('resDaily', bill / 30, v => fmt(v));
      animateNum('resYearly', bill * 12, v => 'PKR ' + fmtK(v));

      // Slab bar
      $('resSlabLabel').textContent = slab.label;
      $('resRate').textContent = 'PKR ' + slab.rate + '/unit';
      $('slabFill').style.width = slab.pct + '%';

      // Extra info rows
      const extras = getExtras(a, bill, kwh, h);
      $('extraRows').innerHTML = extras.map(e => `<div class="extra-row"><span class="ei">${e.icon}</span><span class="et">${e.label}</span><span class="ev">${e.val}</span></div>`).join('');

      // Tip
      if (a.tip) { $('tipBox').style.display = 'flex'; $('tipText').textContent = a.tip; }

      // Color tier
      const tier = bill < 3000 ? 'green' : bill < 8000 ? 'yellow' : 'red';
      const card = $('resultCard');
      card.className = `result-card ${tier} show`;

      if (!silent) toast('‚úÖ Bill calculated!', 'success');
    }

    function getExtras(a, bill, kwh, h) {
      return [
        { icon: 'üí∞', label: 'Daily Cost', val: 'PKR ' + fmt(bill / 30) },
        { icon: 'üìÖ', label: 'Weekly Cost', val: 'PKR ' + fmt(bill / 4.3) },
        { icon: 'üìÜ', label: 'Yearly Estimate', val: 'PKR ' + fmt(bill * 12) },
        { icon: '‚ö°', label: 'Per kWh Rate Applied', val: 'PKR ' + unitPrice(kwh) + '/unit' },
        { icon: 'üîß', label: 'Fixed Charge (included)', val: 'PKR 75/month' },
      ];
    }

    // ‚îÄ‚îÄ Animate number ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function animateNum(id, target, formatter) {
      const el = $(id);
      const start = parseFloat(el.textContent.replace(/,/g, '')) || 0;
      const dur = 600, startT = performance.now();
      function step(now) {
        const p = Math.min((now - startT) / dur, 1);
        const ease = 1 - Math.pow(1 - p, 3);
        el.textContent = formatter(start + (target - start) * ease);
        if (p < 1) requestAnimationFrame(step);
      }
      requestAnimationFrame(step);
    }

    // ‚îÄ‚îÄ Copy result ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function copyResult() {
      if (!lastResult) { toast('Calculate first!', 'warn'); return; }
      const r = lastResult;
      const txt = `‚ö° ${r.name} Bill Estimate\nMonthly: PKR ${fmt(r.bill)}\nUnits: ${r.kwh.toFixed(2)} kWh\nTariff: ${r.slab.label}\nNEPRA 2025 rates`;
      navigator.clipboard.writeText(txt).then(() => toast('üìã Copied to clipboard!', 'success'));
    }

    // ‚îÄ‚îÄ Multi-appliance ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function addToMulti() {
      if (!lastResult) { toast('Calculate first!', 'warn'); return; }
      addItemToMulti(lastResult);
    }
    function addCurrentToMulti() {
      if (!lastResult) { toast('Go to Calculator tab, enter values, then calculate first.', 'warn'); return; }
      addItemToMulti(lastResult);
      switchTab('multi', document.querySelectorAll('.tab')[1]);
    }
    function addItemToMulti(r) {
      multiItems.push({ ...r, id: Date.now() });
      renderMulti();
      toast('‚ûï Added to household total!', 'success');
    }
    function removeMultiItem(id) {
      multiItems = multiItems.filter(x => x.id !== id);
      renderMulti();
    }
    function renderMulti() {
      const list = $('multiList');
      if (!multiItems.length) {
        list.innerHTML = '<div style="text-align:center;padding:32px;color:var(--txt3);font-size:14px">No appliances added yet.<br>Go to Calculator tab and click "Add to Total"</div>';
        $('totalRow').style.display = 'none'; return;
      }
      list.innerHTML = multiItems.map(it => `
    <div class="multi-item">
      <span class="mi-icon">${it.icon}</span>
      <div><div class="mi-name">${it.name}</div><div class="mi-sub">${it.watts}W ¬∑ ${it.hours}h/day ¬∑ ${it.kwh.toFixed(1)} kWh</div></div>
      <span class="mi-cost">PKR ${fmt(it.bill)}</span>
      <button class="mi-del" onclick="removeMultiItem(${it.id})" title="Remove">‚úï</button>
    </div>`).join('');
      const total = multiItems.reduce((s, x) => s + x.bill, 0);
      $('totalAmt').textContent = 'PKR ' + fmt(total);
      $('totalRow').style.display = 'flex';
    }

    // ‚îÄ‚îÄ Tabs ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function switchTab(name, btn) {
      ['calc', 'multi', 'tips'].forEach(t => $('tab-' + t).style.display = 'none');
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      $('tab-' + name).style.display = 'block';
      btn.classList.add('active');
    }

    // ‚îÄ‚îÄ Search ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    $('searchInput').oninput = e => buildSidebar(e.target.value);

    // ‚îÄ‚îÄ Theme toggle ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    $('themeBtn').onclick = () => {
      const html = document.documentElement;
      const isDark = html.dataset.theme === 'dark';
      html.dataset.theme = isDark ? 'light' : 'dark';
      $('themeBtn').textContent = isDark ? 'üåô' : '‚òÄÔ∏è';
      toast(isDark ? '‚òÄÔ∏è Light mode' : 'üåô Dark mode', 'info');
    };

    // ‚îÄ‚îÄ Error helpers ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function showErr(msg) { $('errTxt').textContent = msg; $('errMsg').classList.add('show'); $('resultCard').classList.remove('show'); }
    function hideErr() { $('errMsg').classList.remove('show'); }

    // ‚îÄ‚îÄ Toast ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function toast(msg, type = 'info') {
      const el = document.createElement('div');
      el.className = 'toast';
      const colors = { success: '#34d399', warn: '#fbbf24', info: '#38bdf8' };
      el.style.borderColor = (colors[type] || colors.info) + '44';
      el.textContent = msg;
      $('toastWrap').appendChild(el);
      setTimeout(() => {
        el.classList.add('removing');
        setTimeout(() => el.remove(), 300);
      }, 3000);
    }

    // ‚îÄ‚îÄ Keyboard shortcuts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    document.addEventListener('keydown', e => {
      if (e.key === 'Enter' && (e.target.id === 'hoursInput' || e.target.id === 'wattInput')) calculate();
      if (e.key === 'Escape') hideErr();
    });

    // ‚îÄ‚îÄ Init ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    buildSidebar();
    selectAppliance(0);
  </script>
</body>

</html>