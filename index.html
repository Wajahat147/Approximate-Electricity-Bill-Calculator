<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Electricity Bill Calculator â€” NEPRA 2024-25</title>
  <meta name="description" content="Calculate your monthly electricity bill using Pakistan's NEPRA 2024-25 residential tariff for any home appliance."/>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet"/>
  <style>
    /* â”€â”€ Reset & Base â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg-dark:      #0d1117;
      --bg-panel:     #131922;
      --bg-card:      #1c2433;
      --bg-card-sel:  #1a3a5c;
      --accent:       #38bdf8;
      --accent-glow:  #0ea5e9;
      --accent-dim:   rgba(56,189,248,0.12);
      --text:         #f1f5f9;
      --text-muted:   #94a3b8;
      --text-label:   #64748b;
      --border:       #1e2a3b;
      --success:      #34d399;
      --success-bg:   rgba(52,211,153,0.08);
      --warning:      #fbbf24;
      --warning-bg:   rgba(251,191,36,0.08);
      --error:        #f87171;
      --error-bg:     rgba(248,113,113,0.08);
      --radius:       14px;
      --sidebar-w:    230px;
    }

    html, body {
      height: 100%;
      font-family: 'Inter', system-ui, sans-serif;
      background: var(--bg-dark);
      color: var(--text);
      overflow: hidden;
    }

    /* â”€â”€ Layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .app { display: flex; flex-direction: column; height: 100vh; }

    /* â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 28px;
      background: var(--bg-panel);
      border-bottom: 1px solid var(--border);
      flex-shrink: 0;
      gap: 16px;
    }
    .header-left { display: flex; align-items: center; gap: 14px; }
    .header-bolt {
      font-size: 30px;
      filter: drop-shadow(0 0 8px var(--accent));
      animation: pulse-bolt 2.5s ease-in-out infinite;
    }
    @keyframes pulse-bolt {
      0%,100% { filter: drop-shadow(0 0 6px var(--accent)); }
      50%      { filter: drop-shadow(0 0 16px var(--accent)); }
    }
    .header-title { font-size: 20px; font-weight: 700; color: var(--text); line-height:1.2; }
    .header-sub   { font-size: 11px; color: var(--accent); font-weight: 500; letter-spacing:.4px; }
    .tariff-badge {
      padding: 5px 14px;
      border: 1px solid rgba(56,189,248,0.35);
      border-radius: 999px;
      font-size: 11px;
      font-weight: 600;
      color: var(--accent);
      background: var(--accent-dim);
      white-space: nowrap;
      letter-spacing: .3px;
    }

    /* â”€â”€ Body â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .body { display: flex; flex: 1; overflow: hidden; }

    /* â”€â”€ Sidebar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .sidebar {
      width: var(--sidebar-w);
      background: var(--bg-panel);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      padding: 18px 10px;
      gap: 4px;
      overflow-y: auto;
      flex-shrink: 0;
    }
    .sidebar-heading {
      font-size: 9px;
      font-weight: 700;
      letter-spacing: 1.2px;
      color: var(--text-label);
      padding: 0 8px 10px;
      text-transform: uppercase;
    }
    .app-card {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 12px;
      border-radius: 10px;
      cursor: pointer;
      transition: background .18s, box-shadow .18s;
      border: 1px solid transparent;
      position: relative;
    }
    .app-card:hover { background: var(--bg-card); }
    .app-card.active {
      background: var(--bg-card-sel);
      border-color: rgba(56,189,248,0.35);
      box-shadow: 0 0 0 1px rgba(56,189,248,0.15) inset;
    }
    .app-card.active::before {
      content: '';
      position: absolute;
      left: 0; top: 20%; bottom: 20%;
      width: 3px;
      background: var(--accent);
      border-radius: 0 3px 3px 0;
    }
    .app-card-icon { font-size: 22px; line-height:1; flex-shrink: 0; }
    .app-card-name { font-size: 13px; font-weight: 500; color: var(--text); }

    /* Tariff slab mini table */
    .slab-box {
      margin-top: auto;
      padding: 12px 12px;
      background: rgba(14,165,233,0.07);
      border: 1px solid rgba(56,189,248,0.18);
      border-radius: 10px;
    }
    .slab-title {
      font-size: 9px;
      font-weight: 700;
      letter-spacing: 1px;
      color: var(--accent);
      margin-bottom: 8px;
      text-transform: uppercase;
    }
    .slab-row {
      display: flex;
      justify-content: space-between;
      font-size: 10px;
      font-family: 'JetBrains Mono', monospace;
      color: var(--text-muted);
      padding: 2px 0;
    }
    .slab-row .rate { color: var(--accent); font-weight: 600; }

    /* â”€â”€ Main Content â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .main {
      flex: 1;
      overflow-y: auto;
      display: flex;
      align-items: flex-start;
      justify-content: center;
      padding: 36px 24px;
    }
    .calc-wrapper { width: 100%; max-width: 540px; }

    /* Appliance heading */
    .appl-heading {
      display: flex;
      align-items: center;
      gap: 14px;
      margin-bottom: 28px;
    }
    .appl-emoji {
      font-size: 44px;
      line-height: 1;
      transition: transform .3s cubic-bezier(.34,1.56,.64,1);
    }
    .appl-emoji.pop { transform: scale(1.25); }
    .appl-name {
      font-size: 28px;
      font-weight: 800;
      color: var(--text);
      transition: opacity .2s;
    }

    /* Input Card */
    .input-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 24px 26px;
      margin-bottom: 14px;
    }
    .field-group { margin-bottom: 18px; }
    .field-group:last-child { margin-bottom: 0; }
    .field-label {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 12px;
      font-weight: 600;
      color: var(--text-muted);
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: .5px;
    }
    .field-label span { font-size: 14px; }

    .field-input {
      width: 100%;
      padding: 12px 16px;
      background: var(--bg-dark);
      border: 1.5px solid var(--border);
      border-radius: 10px;
      color: var(--text);
      font-size: 15px;
      font-family: 'JetBrains Mono', monospace;
      font-weight: 500;
      outline: none;
      transition: border-color .2s, box-shadow .2s;
    }
    .field-input::placeholder { color: var(--text-label); font-family: 'Inter', sans-serif; font-size: 13px; font-weight: 400; }
    .field-input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(56,189,248,0.15), 0 0 16px rgba(56,189,248,0.08);
    }
    .field-hint { font-size: 11px; color: var(--text-label); margin-top: 5px; }

    /* Error banner */
    .error-msg {
      display: none;
      align-items: center;
      gap: 8px;
      padding: 10px 14px;
      background: var(--error-bg);
      border: 1px solid rgba(248,113,113,0.3);
      border-radius: 8px;
      font-size: 13px;
      color: var(--error);
      margin-bottom: 14px;
    }
    .error-msg.show { display: flex; }

    /* Calculate Button */
    .calc-btn {
      width: 100%;
      padding: 15px;
      background: linear-gradient(135deg, #0ea5e9, #0369a1);
      border: none;
      border-radius: 11px;
      color: #fff;
      font-size: 15px;
      font-weight: 700;
      font-family: 'Inter', sans-serif;
      cursor: pointer;
      letter-spacing: .3px;
      position: relative;
      overflow: hidden;
      transition: transform .15s, box-shadow .15s;
      margin-bottom: 24px;
    }
    .calc-btn::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(255,255,255,.12), transparent);
      opacity: 0;
      transition: opacity .2s;
    }
    .calc-btn:hover { transform: translateY(-1px); box-shadow: 0 6px 24px rgba(14,165,233,.35); }
    .calc-btn:hover::before { opacity: 1; }
    .calc-btn:active { transform: translateY(0); }

    /* â”€â”€ Result Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .result-card {
      border-radius: var(--radius);
      padding: 24px 26px;
      border: 1px solid;
      display: none;
      animation: slideUp .35s cubic-bezier(.34,1.3,.64,1);
    }
    .result-card.show { display: block; }
    @keyframes slideUp {
      from { opacity:0; transform: translateY(18px); }
      to   { opacity:1; transform: translateY(0); }
    }
    .result-card.green  { background:var(--success-bg);  border-color: rgba(52,211,153,.3);  }
    .result-card.yellow { background:var(--warning-bg);  border-color: rgba(251,191,36,.3);  }
    .result-card.red    { background:var(--error-bg);    border-color: rgba(248,113,113,.3); }

    .result-header { display: flex; align-items: center; gap: 8px; margin-bottom: 14px; }
    .result-badge {
      font-size: 12px;
      font-weight: 700;
      padding: 3px 10px;
      border-radius: 999px;
      text-transform: uppercase;
      letter-spacing: .5px;
    }
    .green  .result-badge { background: rgba(52,211,153,.18); color: var(--success); }
    .yellow .result-badge { background: rgba(251,191,36,.18); color: var(--warning); }
    .red    .result-badge { background: rgba(248,113,113,.18); color: var(--error); }

    .result-title { font-size: 13px; font-weight: 600; color: var(--text-muted); }

    .result-amount {
      font-size: 46px;
      font-weight: 800;
      letter-spacing: -1px;
      margin-bottom: 18px;
      line-height: 1;
    }
    .result-amount .currency {
      font-size: 22px;
      font-weight: 600;
      vertical-align: super;
      margin-right: 4px;
    }
    .green  .result-amount { color: var(--success); }
    .yellow .result-amount { color: var(--warning); }
    .red    .result-amount { color: var(--error); }

    .result-divider {
      height: 1px;
      background: var(--border);
      margin-bottom: 16px;
    }

    .result-row {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin-bottom: 10px;
    }
    .result-row-icon  { font-size: 16px; flex-shrink: 0; margin-top: 1px; }
    .result-row-label { font-size: 11px; color: var(--text-label); font-weight: 600; text-transform: uppercase; letter-spacing: .4px; }
    .result-row-val   { font-size: 13px; color: var(--text-muted); font-weight: 500; }

    /* â”€â”€ Scrollbar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 99px; }

    /* â”€â”€ Responsive â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    @media (max-width: 640px) {
      html, body { overflow: auto; }
      .app { height: auto; }
      .body { flex-direction: column; overflow: visible; }
      .sidebar { width: 100%; flex-direction: row; flex-wrap: wrap; padding: 10px; overflow: visible; }
      .sidebar-heading, .slab-box { display: none; }
      .app-card { flex: 0 0 auto; }
      .main { padding: 20px 16px; }
    }
  </style>
</head>
<body>
<div class="app">

  <!-- â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <header class="header">
    <div class="header-left">
      <div class="header-bolt">âš¡</div>
      <div>
        <div class="header-title">Electricity Bill Calculator</div>
        <div class="header-sub">NEPRA Residential Tariff 2024â€“25 Â· Pakistan</div>
      </div>
    </div>
    <div class="tariff-badge">PKR 27.68 â€“ 71.00 / unit</div>
  </header>

  <div class="body">

    <!-- â”€â”€ Sidebar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-heading">Appliances</div>

      <div class="app-card active" data-idx="0" onclick="selectAppliance(0)">
        <div class="app-card-icon">ğŸ§Š</div>
        <div class="app-card-name">Refrigerator</div>
      </div>
      <div class="app-card" data-idx="1" onclick="selectAppliance(1)">
        <div class="app-card-icon">ğŸ’¨</div>
        <div class="app-card-name">Ceiling Fan</div>
      </div>
      <div class="app-card" data-idx="2" onclick="selectAppliance(2)">
        <div class="app-card-icon">ğŸ’¡</div>
        <div class="app-card-name">Light / Bulb</div>
      </div>
      <div class="app-card" data-idx="3" onclick="selectAppliance(3)">
        <div class="app-card-icon">â„ï¸</div>
        <div class="app-card-name">Air Conditioner</div>
      </div>
      <div class="app-card" data-idx="4" onclick="selectAppliance(4)">
        <div class="app-card-icon">ğŸŒ¬ï¸</div>
        <div class="app-card-name">Room Cooler</div>
      </div>
      <div class="app-card" data-idx="5" onclick="selectAppliance(5)">
        <div class="app-card-icon">ğŸ“º</div>
        <div class="app-card-name">Television</div>
      </div>
      <div class="app-card" data-idx="6" onclick="selectAppliance(6)">
        <div class="app-card-icon">ğŸ§º</div>
        <div class="app-card-name">Iron</div>
      </div>

      <!-- NEPRA Tariff reference -->
      <div class="slab-box">
        <div class="slab-title">NEPRA 2024-25 Slabs</div>
        <div class="slab-row"><span>â‰¤ 100 units</span><span class="rate">27.68</span></div>
        <div class="slab-row"><span>101 â€“ 200</span><span class="rate">32.47</span></div>
        <div class="slab-row"><span>201 â€“ 300</span><span class="rate">38.79</span></div>
        <div class="slab-row"><span>301 â€“ 400</span><span class="rate">45.00</span></div>
        <div class="slab-row"><span>401 â€“ 500</span><span class="rate">54.00</span></div>
        <div class="slab-row"><span>501 â€“ 600</span><span class="rate">59.00</span></div>
        <div class="slab-row"><span>601 â€“ 700</span><span class="rate">66.00</span></div>
        <div class="slab-row"><span>700+</span><span class="rate">71.00</span></div>
      </div>
    </aside>

    <!-- â”€â”€ Calculator Main â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <main class="main">
      <div class="calc-wrapper">

        <!-- Appliance heading -->
        <div class="appl-heading">
          <div class="appl-emoji" id="appIcon">ğŸ§Š</div>
          <div class="appl-name" id="appName">Refrigerator</div>
        </div>

        <!-- Inputs -->
        <div class="input-card">
          <div class="field-group">
            <div class="field-label"><span>ğŸ•</span> Daily Usage Hours</div>
            <input class="field-input" id="hoursInput" type="number" min="1" max="24" step="0.5"
                   placeholder="e.g. 8" inputmode="decimal"/>
            <div class="field-hint">Hours this appliance runs per day &nbsp;(1 â€“ 24 hrs)</div>
          </div>
          <div class="field-group">
            <div class="field-label"><span>âš¡</span> Power Wattage (W)</div>
            <input class="field-input" id="wattInput" type="number" min="1" max="50000" step="1"
                   placeholder="e.g. 1500" inputmode="decimal"/>
            <div class="field-hint">Rated wattage printed on the appliance label &nbsp;(1 â€“ 50,000 W)</div>
          </div>
        </div>

        <!-- Error banner -->
        <div class="error-msg" id="errorMsg">
          <span>âš ï¸</span><span id="errorText"></span>
        </div>

        <!-- Button -->
        <button class="calc-btn" onclick="calculate()">âš¡ &nbsp; Calculate Monthly Bill</button>

        <!-- Result -->
        <div class="result-card" id="resultCard">
          <div class="result-header">
            <span class="result-badge" id="resultBadge">Low</span>
            <span class="result-title">Monthly Bill Estimate</span>
          </div>
          <div class="result-amount">
            <span class="currency">PKR</span><span id="resultBill">0</span>
          </div>
          <div class="result-divider"></div>
          <div class="result-row">
            <span class="result-row-icon">ğŸ“Š</span>
            <div>
              <div class="result-row-label">Units Consumed</div>
              <div class="result-row-val" id="resultKwh">â€”</div>
            </div>
          </div>
          <div class="result-row">
            <span class="result-row-icon">ğŸ“‹</span>
            <div>
              <div class="result-row-label">Tariff Slab</div>
              <div class="result-row-val" id="resultSlab">â€”</div>
            </div>
          </div>
          <div class="result-row">
            <span class="result-row-icon">ğŸ’¡</span>
            <div>
              <div class="result-row-label">Extra Info</div>
              <div class="result-row-val" id="resultExtra">â€”</div>
            </div>
          </div>
        </div>

      </div>
    </main>
  </div>
</div>

<script>
  // â”€â”€ Appliance Data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const appliances = [
    {
      name: 'Refrigerator', icon: 'ğŸ§Š',
      extra: (bill, kwh, h) =>
        `Annual cost estimate: PKR ${fmt(bill * 12)}`
    },
    {
      name: 'Ceiling Fan', icon: 'ğŸ’¨',
      extra: (bill, kwh, h) =>
        `Daily cost: PKR ${fmt(bill / 30)}`
    },
    {
      name: 'Light / Bulb', icon: 'ğŸ’¡',
      extra: (bill, kwh, h) =>
        `Annual cost estimate: PKR ${fmt(bill * 12)}`
    },
    {
      name: 'Air Conditioner', icon: 'â„ï¸',
      extra: (bill, kwh, h) =>
        `Daily: PKR ${fmt(bill / 30)}  Â·  6-month summer cost: PKR ${fmt(bill * 6)}`
    },
    {
      name: 'Room Cooler', icon: 'ğŸŒ¬ï¸',
      extra: (bill, kwh, h) =>
        `Daily: PKR ${fmt(bill / 30)}  Â·  4-month seasonal cost: PKR ${fmt(bill * 4)}`
    },
    {
      name: 'Television', icon: 'ğŸ“º',
      extra: (bill, kwh, h) =>
        `Usage: ${h} hrs/day  Â·  Daily cost: PKR ${fmt(bill / 30)}`
    },
    {
      name: 'Iron', icon: 'ğŸ§º',
      extra: (bill, kwh, h) =>
        `Cost per session (~1 hr): PKR ${fmt(bill / (30 * h))}`
    }
  ];

  // â”€â”€ NEPRA 2024-2025 Tariff â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function unitPrice(kwh) {
    if (kwh <= 100) return 27.68;
    if (kwh <= 200) return 32.47;
    if (kwh <= 300) return 38.79;
    if (kwh <= 400) return 45.00;
    if (kwh <= 500) return 54.00;
    if (kwh <= 600) return 59.00;
    if (kwh <= 700) return 66.00;
    return 71.00;
  }

  function slabLabel(kwh) {
    if (kwh <= 100) return 'Slab 1 (â‰¤ 100 units)  â€”  PKR 27.68 / unit';
    if (kwh <= 200) return 'Slab 2 (101 â€“ 200 units)  â€”  PKR 32.47 / unit';
    if (kwh <= 300) return 'Slab 3 (201 â€“ 300 units)  â€”  PKR 38.79 / unit';
    if (kwh <= 400) return 'Slab 4 (301 â€“ 400 units)  â€”  PKR 45.00 / unit';
    if (kwh <= 500) return 'Slab 5 (401 â€“ 500 units)  â€”  PKR 54.00 / unit';
    if (kwh <= 600) return 'Slab 6 (501 â€“ 600 units)  â€”  PKR 59.00 / unit';
    if (kwh <= 700) return 'Slab 7 (601 â€“ 700 units)  â€”  PKR 66.00 / unit';
    return             'Slab 8 (700+ units)  â€”  PKR 71.00 / unit';
  }

  // â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const fmt = n => n.toLocaleString('en-PK', { minimumFractionDigits: 2, maximumFractionDigits: 2 });

  let selectedIdx = 0;

  // â”€â”€ Select Appliance â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function selectAppliance(idx) {
    document.querySelectorAll('.app-card').forEach(c => c.classList.remove('active'));
    document.querySelector(`[data-idx="${idx}"]`).classList.add('active');
    selectedIdx = idx;

    const a = appliances[idx];
    const iconEl = document.getElementById('appIcon');
    const nameEl = document.getElementById('appName');

    iconEl.classList.add('pop');
    setTimeout(() => iconEl.classList.remove('pop'), 300);

    iconEl.textContent = a.icon;
    nameEl.textContent = a.name;

    // Reset
    document.getElementById('hoursInput').value = '';
    document.getElementById('wattInput').value  = '';
    hideError();
    document.getElementById('resultCard').classList.remove('show');
  }

  // â”€â”€ Calculate â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function calculate() {
    const hoursRaw = document.getElementById('hoursInput').value.trim();
    const wattRaw  = document.getElementById('wattInput').value.trim();

    const hours = parseFloat(hoursRaw);
    const watts = parseFloat(wattRaw);

    if (!hoursRaw || isNaN(hours)) { showError('Please enter a valid number for daily usage hours.'); return; }
    if (hours < 1 || hours > 24)   { showError('Hours must be between 1 and 24.'); return; }
    if (!wattRaw || isNaN(watts))  { showError('Please enter a valid wattage value.'); return; }
    if (watts <= 0 || watts > 50000){ showError('Wattage must be between 1 and 50,000 watts.'); return; }

    hideError();

    // Core formula: (W Ã— h/day Ã— 30 days) / 1000
    const kwh  = (watts * hours * 30) / 1000;
    const rate = unitPrice(kwh);
    const bill = kwh * rate;

    const a = appliances[selectedIdx];

    // Determine colour tier
    const tier = bill < 3000 ? 'green' : bill < 8000 ? 'yellow' : 'red';
    const badge = bill < 3000 ? 'âœ… Low' : bill < 8000 ? 'âš ï¸ Moderate' : 'ğŸ”´ High';

    const card = document.getElementById('resultCard');
    card.className = `result-card ${tier} show`;

    document.getElementById('resultBill').textContent = fmt(bill);
    document.getElementById('resultBadge').textContent = badge;
    document.getElementById('resultKwh').textContent  = `${kwh.toFixed(2)} kWh / month`;
    document.getElementById('resultSlab').textContent = slabLabel(kwh);
    document.getElementById('resultExtra').textContent = a.extra(bill, kwh, hours);
  }

  // â”€â”€ Error helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function showError(msg) {
    document.getElementById('errorText').textContent = msg;
    document.getElementById('errorMsg').classList.add('show');
    document.getElementById('resultCard').classList.remove('show');
  }
  function hideError() {
    document.getElementById('errorMsg').classList.remove('show');
  }

  // Enter key support
  ['hoursInput','wattInput'].forEach(id => {
    document.getElementById(id).addEventListener('keydown', e => {
      if (e.key === 'Enter') calculate();
    });
  });
</script>
</body>
</html>
